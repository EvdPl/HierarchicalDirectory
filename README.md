# Hierarchical Directory Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–Ω—ã–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, MySQL –∏ Docker.

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≤ –≤–∏–¥–µ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
- **–ü–æ–∏—Å–∫ –ø–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É –ø–æ –∫–æ–¥—É –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é (–≤–∫–ª—é—á–∞—è —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)**
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ**
- **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ XML-—Ñ–∞–π–ª–∞**
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
- **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –æ—à–∏–±–æ–∫**

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Python 3.11+, FastAPI, SQLAlchemy
- **Database**: MySQL
- **Frontend**: HTML, CSS, JavaScript 
- **Containerization**: Docker, Docker Compose
- **XML Processing**: lxml

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
hierarchical_directory/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py          # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ crud.py             # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ xml_importer.py     # –ò–º–ø–æ—Ä—Ç –∏–∑ XML
‚îÇ   ‚îú‚îÄ‚îÄ logger.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îú‚îÄ‚îÄ style.css       # –°—Ç–∏–ª–∏
‚îÇ       ‚îî‚îÄ‚îÄ script.js       # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π JavaScript
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ Dockerfile              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ init.sql                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ logs/
    ‚îî‚îÄ‚îÄ app.log             # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Docker –∏ Docker Compose**
- **Git**
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
**1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/EvdPl/HierarchicalDirectory.git
cd HierarchicalDirectory
```
**2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```
**3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Docker Compose:**
```bash
docker-compose up --build -d
```
**4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000**

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 8000, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL - –Ω–∞ –ø–æ—Ä—Ç—É 3306.**

## üìñ API Endpoints
- **GET /** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **GET /api/items/tree** - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–µ—Ä–µ–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **GET /api/search/items/?code=...&name=...** - –ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **POST /api/items** - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
- **PUT /api/items/{item_id}** - –û–±–Ω–æ–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç
- **DELETE /api/items/{item_id}** - –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç
- **DELETE /api/items/{item_id}/with-children** - –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å –ø–æ—Ç–æ–º–∫–∞–º–∏
- **POST /api/import/xml** - –ò–º–ø–æ—Ä—Ç –∏–∑ XML

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞
### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
MYSQL_HOST=db
MYSQL_PORT=3306
MYSQL_DATABASE=directory_db
MYSQL_USER=directory_user
MYSQL_PASSWORD=directory_password
```
### –§–æ—Ä–º–∞—Ç XML –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
```bash
<?xml version="1.0" encoding="UTF-8"?>
<directory>
    <item code="001" name="–°—Ç—Ä–∞–Ω—ã">
        <item code="001.001" name="–†–æ—Å—Å–∏—è">
            <item code="001.001.001" name="–ú–æ—Å–∫–≤–∞"/>
            <item code="001.001.002" name="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"/>
            <item code="001.001.003" name="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫"/>
        </item>
    </item>
    
    <item code="002" name="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤">
        <item code="002.001" name="–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞">
            <item code="002.001.001" name="–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã"/>
            <item code="002.001.002" name="–ù–æ—É—Ç–±—É–∫–∏"/>
            <item code="002.001.003" name="–¢–µ–ª–µ–≤–∏–∑–æ—Ä—ã"/>
        </item>
        <item code="002.002" name="–û–¥–µ–∂–¥–∞">
            <item code="002.002.001" name="–ú—É–∂—Å–∫–∞—è"/>
            <item code="002.002.002" name="–ñ–µ–Ω—Å–∫–∞—è"/>
            <item code="002.002.003" name="–î–µ—Ç—Å–∫–∞—è"/>
        </item>
    </item>
    
</directory>
```

## üìä –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏**
- **–ü–æ–∏—Å–∫ —Å –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic —Å—Ö–µ–º—ã**
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏
**–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª logs/app.log –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
docker-compose logs -f web db
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
**–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–Ω—ã–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ)**

**1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞.**

**2. –ü–æ–∏—Å–∫ –ø–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É: –ø–æ –∫–æ–¥—É –∏ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é. –ü–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –∫–∞–∫ –ø–æ –∫–æ–¥—É, —Ç–∞–∫ –∏ –ø–æ –µ–≥–æ —á–∞—Å—Ç–∏, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å –≤—Ö–æ–∂–¥–µ–Ω–∏–µ–º —Å—Ç—Ä–æ–∫–∏ –≤ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ. –ù–∞–π–¥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Ç–∞–∫–∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ –∏–ª–∏ –µ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.**

**3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ / –£–¥–∞–ª–µ–Ω–∏–µ / –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—é–±–æ–π –ø–æ–∑–∏—Ü–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞.**

**4. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —á–µ—Ä–µ–∑ XML-—Ñ–∞–π–ª.**

**5. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.**

**7. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∏ –æ—à–∏–±–æ–∫.**
